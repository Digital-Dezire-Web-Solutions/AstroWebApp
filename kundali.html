<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Kundali | Astro Nivesh</title>
    <!-- swiper slider css CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
        integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Tempus Dominus CSS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="icon" href="/images/astrology.png" />
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZF2CQTE5JG"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-ZF2CQTE5JG');
    </script>
    <script src="https://cdn.pagesense.io/js/astronivesh/b70b9482d2454a09ac5feadc3675f35c.js"></script>

</head>

<body>

    <!-- __________________________________ 
     Our header Comp 
     ------------------------ -->
    <!-- 
     <header class="header-comp">
        <div class="common-container3">

            <div class="header-flex-bx flex item-between">

                <div class="left-header-logo flex item-start gap">
                    <img src="./images/astrology.png" alt="">

                    <h6>Astro Nivesh</h6>
                    
                </div>

                <div class="right-navbar class-rel flex item-start gap">
                    <div class="navbar class-rel">
                    <nav class="nav class-rel">
                        <div class="nav-lists flex item-start">
                            <li><a href="#">Calendar</a></li>
                            <li><a href="#">Market</a></li>
                            <li><a href="#">Kundali</a></li>
                            <li><a href="#">Affirmations</a></li>
                            <li><a href="#">Runes</a></li>
                            <li><a href="#">Healing</a></li>
                            <li><a href="#">Wisdom</a></li>
                        </div>
                    </nav>
                </div>

                <div class="header-icons-flex-bx class-rel flex gap">

                    <a href="#">
                        <button class="headr-btn">
                            <ion-icon name="cart-outline"></ion-icon>
                            <span>Store</span>
                        </button>
                    </a>

                    <a href="#">
                        <button id="login_btn" class="headr-btn headr-btn2">
                            <ion-icon name="person"></ion-icon>
                            <span>Login</span>
                        </button>
                    </a>
                    
                </div>

                <button class="menu-bar-btn">
                    <i class="fa-solid fa-bars-staggered"></i>
                </button>
                
                </div>
                
            </div>
            
        </div>
     </header> -->

    <section class="top-header-comp">
        <div class="common-container3 top-header-flex flex item-between">
            <div class="left-header-logo flex item-start gap">
                <img src="./images/astrology.png" alt="">

                <h6>Astro Nivesh</h6>

            </div>

            <div class="right-top-header-flex-bx flex item-start gap">

                <!-- <div class="top-hedr-bx flex item-center">
                    <div class="left-hedr-icon">
                        <ion-icon name="home"></ion-icon>
                    </div>
                    <div class="right-hedr-inof">
                        <h6>Reach Us</h6>
                        <span>601 , Ram Nagar Dewas</span>
                    </div>
                </div> -->

                <div class="top-hedr-bx flex item-center">
                    <div class="left-hedr-icon">
                        <ion-icon name="call"></ion-icon>
                    </div>
                    <div class="right-hedr-inof">
                        <h6>Talk to Us</h6>
                        <span>+91-9376241408</span>
                    </div>
                </div>


                <button class="menu-bar-btn">
                    <ion-icon name="menu"></ion-icon>
                </button>


                <!-- <div class="cart-bx cart-bx2">
                    <button class="cart-btn cart-btn2">
                        <span class="qty">4</span>
                        <ion-icon name="bag"></ion-icon>
                    </button>

                    <div class="cart-lists-bx cart-lists-bx-mob">

                        <li>
                            <div class="item-img">
                                <img src="./images/astro-book.jpg" alt="">
                            </div>
                            <div class="item-info">
                                <h6>Astro Book</h6>
                                <p>Quantity : 2 x $45</p>

                                <h5>$90</h5>
                            </div>
                            <div class="delet-item-btn">
                                <ion-icon name="trash"></ion-icon>
                            </div>
                        </li>


                        <li>
                            <div class="item-img">
                                <img src="./images/astro-book.jpg" alt="">
                            </div>
                            <div class="item-info">
                                <h6>Astro Book</h6>
                                <p>Quantity : 2 x $45</p>

                                <h5>$90</h5>
                            </div>

                            <div class="delet-item-btn">
                                <ion-icon name="trash"></ion-icon>
                            </div>

                        </li>


                        <li>
                            <div class="item-img">
                                <img src="./images/astro-book.jpg" alt="">
                            </div>
                            <div class="item-info">
                                <h6>Astro Book</h6>
                                <p>Quantity : 2 x $45</p>

                                <h5>$90</h5>
                            </div>
                            <div class="delet-item-btn">
                                <ion-icon name="trash"></ion-icon>
                            </div>
                        </li>

                        <button class="apnt-btn chckout-btn">
                            Check Out
                        </button>

                    </div>

                </div> -->

                <button class="apnt-btn coming-soon">
                    Appointments
                    <div class="card-info">
                        <p class="title">Coming Soon</p>
                    </div>
                </button>

                <div class="profile-bx" id="login_btn">
                    <ion-icon name="person-circle-outline" size="large" color="#fe7000"></ion-icon>
                    <p id="profile-name">LogIn / Reg.</p>
                </div>

            </div>

        </div>
    </section>
    <style>
        .coming-soon {
            filter: grayscale(5);
        }

        .coming-soon .card-info {
            color: #ffffff;
            display: none;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            overflow: visible;
            border-radius: .7rem;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 3;
            background: #dcdcdc;
            transition: ease-in-out
        }

        .coming-soon:hover .card-info {
            color: white;
            transition: color 1s;
            display: flex;
            transition: ease-in-out;
        }

        .coming-soon .card-info p {
            color: white;
        }
    </style>


    <header class="header">
        <div class="common-container3 header-flex flex item-between gap">

            <div class="nav-overlay"></div>
            <div class="navbar">

                <button class="close-nav-btn">
                    <ion-icon name="close-circle"></ion-icon>
                </button>

                <div class="left-header-logo flex item-start gap mob-logo">
                    <img src="./images/astrology.png" alt="">

                    <h6>Astro Nivesh</h6>

                </div>

                <div class="search-inpt-bx search-inpt-bx-mob">
                    <input type="text" name="search" id="search" placeholder="Search here...">
                    <button class="search-btn">
                        <ion-icon name="search"></ion-icon>
                    </button>
                </div>

                <nav class="nav">
                    <div class="nav-lists flex item-start">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="kundali.html">Kundali</a></li>
                        <li><a href="market.html">Market</a></li>
                        <li><a href="https://wa.me/9376241408">Talk to Astrologer</a></li>
                    </div>
                </nav>

                <div class="astrology-cont-info">

                    <div class="top-hedr-bx flex item-center">
                        <div class="left-hedr-icon">
                            <ion-icon name="home"></ion-icon>
                        </div>
                        <div class="right-hedr-inof">
                            <h6>Reach Us</h6>
                            <span>601 , Ram Nagar Dewas</span>
                        </div>
                    </div>

                    <div class="top-hedr-bx flex item-center">
                        <div class="left-hedr-icon">
                            <ion-icon name="call"></ion-icon>
                        </div>
                        <div class="right-hedr-inof">
                            <h6>Talk to Us</h6>
                            <span>+91-9376241408</span>
                        </div>
                    </div>

                </div>


                <button class="apnt-btn apnt-btn-mob coming-soon">
                    Appointments
                    <div class="card-info">
                        <p class="title">Coming Soon</p>
                    </div>
                </button>

            </div>

            <div class="right-header-flex flex item-start ">
                <div class="search-inpt-bx">
                    <input type="text" name="search" id="search" placeholder="Search here...">
                    <button class="search-btn">
                        <ion-icon name="search"></ion-icon>
                    </button>
                </div>


                <!-- <div class="cart-bx">
                    <button class="cart-btn">
                        <span class="qty">4</span>
                        <ion-icon name="bag"></ion-icon>
                    </button>

                    <div class="cart-lists-bx">

                        <li>
                            <div class="item-img">
                                <img src="./images/astro-book.jpg" alt="">
                            </div>
                            <div class="item-info">
                                <h6>Astro Book</h6>
                                <p>Quantity : 2 x $45</p>

                                <h5>$90</h5>
                            </div>
                            <div class="delet-item-btn">
                                <ion-icon name="trash"></ion-icon>
                            </div>
                        </li>


                        <li>
                            <div class="item-img">
                                <img src="./images/astro-book.jpg" alt="">
                            </div>
                            <div class="item-info">
                                <h6>Astro Book</h6>
                                <p>Quantity : 2 x $45</p>

                                <h5>$90</h5>
                            </div>

                            <div class="delet-item-btn">
                                <ion-icon name="trash"></ion-icon>
                            </div>

                        </li>


                        <li>
                            <div class="item-img">
                                <img src="./images/astro-book.jpg" alt="">
                            </div>
                            <div class="item-info">
                                <h6>Astro Book</h6>
                                <p>Quantity : 2 x $45</p>

                                <h5>$90</h5>
                            </div>
                            <div class="delet-item-btn">
                                <ion-icon name="trash"></ion-icon>
                            </div>
                        </li>

                        <button class="apnt-btn chckout-btn">
                            Check Out
                        </button>

                    </div>

                </div> -->



            </div>

        </div>
    </header>

    <!-- _______________________
       Our Login Reg Comp 
       ------------------ -->

    <section class="login-reg-comp">

        <div class="login-bx ">

            <button class="close-form-btn">
                <i class="fa-solid fa-xmark"></i>
            </button>

            <div class="login-info">

                <div class="login-logo">
                    <img src="./images/astrology.png" alt="">
                </div>



                <div class="comn-heading">
                    <h4>Sign In to Astrology </h4>
                    <!-- <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima maxime est obcaecati.</p> -->
                </div>

                <div class="login-form">

                    <form onsubmit="handleSubmit(event)">

                        <div class="inpt-bx">
                            <label for="email">Email Address</label>
                            <div class="inpt">
                                <input type="email" id="email" name="email" placeholder="Enter your Email..."
                                    autocomplete="off" required>

                            </div>
                        </div>

                        <div class="inpt-bx">
                            <label for="email">Password</label>
                            <div class="inpt">
                                <input type="password" id="password" name="password"
                                    placeholder="Enter your password..." autocomplete="off" required>
                            </div>
                        </div>

                        <div class="form-btns-flex">

                            <button class="form-btn" type="submit">
                                Sign In
                            </button>

                            <button type="button" class="form-btn form-btn2" id="newAcnt">
                                Create Account
                            </button>

                        </div>
                        <div id="alert" class="alert"></div>


                    </form>


                </div>
            </div>

            <div class="reg-info">

                <div class="login-logo">
                    <img src="./images/astrology.png" alt="">
                </div>

                <div class="comn-heading">
                    <h4>Sign Up to Astrology </h4>
                    <!-- <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima maxime est obcaecati.</p> -->
                </div>

                <div class="login-form">
                    <form onsubmit="handleCreate(event)">

                        <div class="inpt-bx">
                            <label for="name">Name</label>
                            <div class="inpt">
                                <input type="text" name="cname" placeholder="Enter your Name" autocomplete="off"
                                    required>
                            </div>
                        </div>

                        <div class="inpt-bx">
                            <label for="name">Email</label>
                            <div class="inpt">
                                <input type="email" name="cemail" placeholder="Enter your email address..."
                                    autocomplete="off" required>
                            </div>
                        </div>

                        <div class="inpt-bx">
                            <label for="password">Create Password</label>
                            <div class="inpt">
                                <input type="text" name="ccreatepassword" placeholder="Create your password..."
                                    autocomplete="off" required>
                            </div>
                        </div>


                        <div class="inpt-bx">
                            <label for="password">Date Of Birth</label>
                            <div class="inpt">
                                <input type="text" id="calendarInput" name="calendarInput"
                                    placeholder="Choose a date" />
                            </div>
                        </div>

                        <div class="inpt-bx">
                            <label for="password">Birth Time</label>
                            <div class="inpt">
                                <input type="text" id="timePicker" name="timePicker" class="time-picker"
                                    placeholder="Select Time">
                            </div>
                        </div>
                        <div class="inpt-bx">
                            <label for="birthplace">Birth Place</label>
                            <div class="inpt">
                                <input type="text" name="birthplace" placeholder="Enter your Birth Place..."
                                    autocomplete="off" required>
                            </div>
                        </div>
                        <div class="inpt-bx">
                            <label for="consonent">Consonent of your name</label>
                            <div class="inpt">
                                <input type="text" name="consonent" placeholder="Enter your Consonent..."
                                    autocomplete="off" required>
                            </div>
                        </div>
                        <div class="inpt-bx">
                            <label for="vowel">Vowel of your name</label>
                            <div class="inpt">
                                <input type="text" name="vowel" placeholder="Enter your Vowel..." autocomplete="off"
                                    required>
                            </div>
                        </div>

                        <div class="form-btns-flex">

                            <button class="form-btn" type="submit">
                                Create Account
                            </button>

                            <button class="form-btn  form-btn3" type="button" id="signInBtn">
                                I Already Have Account
                            </button>

                        </div>

                    </form>


                </div>

            </div>
            <div class="profile-info">
                <div class="login-logo">
                    <img src="./images/astrology.png" alt="">
                </div>
                <div class="comn-heading">
                    <h4>Astro Nivesh</h4>
                </div>

                <div id="profile-body"></div>
                <a style=" display: flex; align-items: center; justify-content: center;  font-size: 18px; padding-top: 1rem;"
                    href="profile.html"><i class="fa-solid fa-user" style="margin-right: 10px;"></i>My Profile</a>
                <div class="logout-bx" id="logoutBox">
                    <p><ion-icon name="log-out"></ion-icon>Log Out</p>
                </div>
            </div>

        </div>

    </section>

    <!-- ______________________________
        Our kundali comp 
        ----------------- -->


    <section class="kundali-comp">
        <div class="common-container3">

            <div class="kundali-container">
                <h5>Kundali Chart</h5>
                <div class="kundali-img-bx">
                    <!-- Charts -->
                    <div class="kundli-img">
                        <div class="kundali-img-nres">
                            <div class="kundli-chart">
                                <div id="horoscope-chart1" class="chart-container1">
                                    <p>Lagna</p>
                                </div>
                                <p>Lagna</p>
                            </div>
                            <div class="kundli-chart">
                                <div id="horoscope-chart2" class="chart-container2">
                                    <p>Navamsa</p>
                                </div>
                                <p>Navamsa</p>
                            </div>
                        </div>
                        <div class="kundali-img-res">
                            <div id="horoscope-chart1" class="chart-container1">
                            </div>
                            <div id="horoscope-chart2" class="chart-container2" style="display: none;">
                            </div>
                        </div>
                    </div>

                    <!-- Buttons to toggle -->
                    <div class="chart-toggle-buttons">
                        <button id="lagna-btn" class="active" onclick="showChart('lagna')">Lagna</button>
                        <button id="navamsa-btn" onclick="showChart('navamsa')">Navamsa</button>
                        <!-- <button><a href="gochar.html">Gochar</a></button>
                        <button><a href="aspectratio.html">Aspect Ratio</a></button>
                        <button><a href="birthchart.html">Birth Chart</a></button> -->
                    </div>
                    <!-- <div class="chart-toggle-buttons2"> -->
                    <!-- <button><a href="consonantvedh.html">Consonant Vedh</a></button>
                        <button><a href="dayvedh.html">Day Vedh</a></button>
                        <button><a href="frontvedh.html">Front Vedh</a></button>
                        <button><a href="lifeaspect.html">Life aspect</a></button>
                        <button><a href="lifeaspectwithpada.html">Life aspect(pada)</a></button>
                        <button><a href="rashi.html">Rashi</a></button> -->
                    <!-- <button><a href="monthlypunchang.html">Monthly Punchang</a></button> -->
                    <!-- <button><a href="tableofday.html">Table of Day</a></button> -->
                    <!-- <button><a href="tithi.html">Tithi</a></button>
                        <button><a href="profiledet.html">Profile Detail</a></button>
                        <button><a href="rashiplanetposition.html">Rashi Planet</a></button>
                        <button><a href="nakshatraPlanetPosition.html">Nakshatra Planet</a></button> -->
                    <!-- </div> -->
                </div>
            </div>

            <style>
                /* @media all and (min-width: 320px) and (max-width: 767px) {
                    .chart-toggle-buttons {
                        position: absolute;
                        bottom: -60px;
                        left: 33%;
                        transform: translateX(-50%);
                        display: flex !important;
                        gap: 10px;
                    }

                    .kundali-img-nres {
                        display: none !important;
                    }
                } */

                .kundali-container h5 {
                    margin-bottom: 1rem;
                    text-align: center;
                }

                .kundli-chart p {
                    text-align: center;
                }

                .kundali-img-nres {
                    display: flex;
                    align-items: center;
                    gap: 2rem;
                }

                .kundali-img-res {
                    display: none !important;
                }

                .kundali-img-bx {

                    position: relative;
                    margin-bottom: 8rem;
                }

                .chart-toggle-buttons {
                    display: none;
                }

                .kundli-img {
                    display: flex;
                    align-items: center;
                    justify-content: space-around;
                    position: relative;
                    width: 100%;
                }

                .chart-toggle-buttons2 {
                    display: grid;
                    grid-template-columns: repeat(5, 1fr);
                    gap: 10px;
                    width: 100%;
                    max-width: 110rem;
                    margin: 0px auto;
                    margin: 2rem 0;
                }

                .chart-toggle-buttons button,
                .chart-toggle-buttons2 button {
                    padding: 10px 20px;
                    border: none;
                    cursor: pointer;
                    background-color: #f0f0f0;
                    font-size: 16px;
                    border-radius: 5px;
                    transition: background-color 0.3s ease;
                }

                .chart-toggle-buttons button.active,
                .chart-toggle-buttons2 button.active {
                    background-color: #fe7000;
                    color: white;
                }

                .kundli-img svg {
                    width: 100%;
                    height: 100%;
                }

                .gochara-house {
                    display: flex;
                    flex-direction: column;
                }

                .gochara-house-btn {
                    margin-top: 1rem;
                    padding: 10px 20px;
                    border: none;
                    cursor: pointer;
                    font-size: 16px;
                    border-radius: 5px;
                    transition: background-color 0.3s ease;
                    background-color: #fe7000;
                    color: white;
                }

                .btn {
                    padding: 10px 15px;
                    margin: 5px;
                    border: none;
                    cursor: pointer;
                    background-color: lightgray;
                    transition: 0.3s;
                }

                .active {
                    background-color: blue;
                    color: white;
                }

                .section {
                    display: none;
                    /* Hide all sections initially */
                }

                .visible {
                    display: block;
                    /* Show active section */
                }

                .house-factors-selc-bx {
                    margin-bottom: 2rem;
                }
            </style>
            <div class="chart-toggle-buttons2">
                <button class="btn active" onclick="setActive(0)">Planet</button>
                <button class="btn" onclick="setActive(1)">House</button>
                <button class="btn" onclick="setActive(2)">Dasa</button>
                <button class="btn" onclick="setActive(3)">Panchang</button>
                <button class="btn" onclick="setActive(4)">Gochar</button>
            </div>

            <div class="table-data">
                <div id="planet-section" class="section visible">
                    <table>
                        <thead>
                            <tr>
                                <th>Planet</th>
                                <th>R</th>
                                <th>C</th>
                                <th>Zodiac</th>
                                <th>House</th>
                                <th>Nakshatra Lord</th>
                                <th>Nakshatra</th>
                                <th>Pada</th>
                                <th>Zodiac Lord</th>
                                <th>Latitude</th>

                            </tr>
                        </thead>
                        <tbody id="planet-data"></tbody>
                    </table>
                </div>
                <!-- House data Here -->
                <div id="house-section" class="section">
                    <div class="house-factors-selc-bx">
                        <div class="house-fact-sel-bx">
                            <label for="houses">Houses</label>
                            <select id="houseDropdown">
                                <option value="1" selected>House 1</option>
                                <option value="2">House 2</option>
                                <option value="3">House 3</option>
                                <option value="4">House 4</option>
                                <option value="5">House 5</option>
                                <option value="6">House 6</option>
                                <option value="7">House 7</option>
                                <option value="8">House 8</option>
                                <option value="9">House 9</option>
                                <option value="10">House 10</option>
                                <option value="11">House 11</option>
                                <option value="12">House 12</option>
                            </select>
                        </div>

                        <div class="house-fact-sel-bx">
                            <label for="factors">Nature</label>
                            <select id="rashiNakSelect">
                                <option value="Rashi" selected>Rashi</option>
                                <option value="Nakshatra">Nakshatra</option>
                            </select>
                        </div>
                        <div class="house-fact-sel-bx">
                            <label for="factors">Divisional Chart</label>
                            <select id="divisionalSelect">
                                <option value="D1" selected>D1 - Lagna</option>
                                <option value="D2">D2</option>
                                <option value="D3">D3</option>
                                <option value="D3-s">D3-s</option>
                                <option value="D4">D4</option>
                                <option value="D5">D5</option>
                                <option value="D7">D7</option>
                                <option value="D8">D8</option>
                                <option value="D9">D9</option>
                                <option value="D10">D10</option>
                                <option value="D10-R">D10-R</option>
                                <option value="D12">D12</option>
                                <option value="D16">D16</option>
                                <option value="D20">D20</option>
                                <option value="D24">D24</option>
                                <option value="D24-R">D24-R</option>
                                <option value="D27">D27</option>
                                <option value="D30">D30</option>
                                <option value="D40">D40</option>
                                <option value="D45">D45</option>
                                <option value="D60">D60</option>
                            </select>
                        </div>

                    </div>

                    <div class="common-container3">

                        <div class="table-data">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nakshatra(Pada)</th>
                                        <th>Rashi</th>
                                        <th>Planets </th>
                                        <th>Nature</th>
                                        <th>Dasha</th>
                                    </tr>
                                </thead>
                                <tbody data-table="positive" class="tableBody showtablebody" id="thirdTable">
                                </tbody>
                            </table>
                            <h6 style="margin: 2rem 0 1rem 0;">Planet Aspect</h6>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nakshatra(Pada)</th>
                                        <th>Rashi</th>
                                        <th>Planets </th>
                                        <th>Nature</th>
                                        <th>Dasha</th>
                                    </tr>
                                </thead>
                                <tbody data-table="positive" class="tableBody showtablebody" id="fourthTable">
                                </tbody>
                            </table>
                            <h6 style="margin: 2rem 0 1rem 0;">Gochar</h6>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nakshatra(Pada)</th>
                                        <th>Rashi</th>
                                        <th>Planets </th>
                                        <th>Nature</th>
                                        <th>Dasha</th>
                                        <th>Gochar</th>
                                    </tr>
                                </thead>
                                <tbody data-table="positive" class="tableBody showtablebody" id="fifthTable">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Dasa Details Section -->
                <div id="dasa-section" class="section">
                    <table>
                        <thead>
                            <tr>
                                <th colspan="10" style="text-align: center; font-weight: bold; margin-top: 2rem;">
                                    Dasa Details
                                </th>
                            </tr>
                        </thead>
                        <tbody id="dasa-data"></tbody>
                    </table>
                </div>

                <!-- Panchang Details Section -->
                <div id="panchang-section" class="section">
                    <table>
                        <thead>
                            <tr>
                                <th colspan="10" style="text-align: center; font-weight: bold; margin-top: 2rem;">
                                    Panchang Details
                                </th>
                            </tr>
                        </thead>
                        <tbody id="panchang-data"></tbody>
                    </table>
                </div>

                <!-- Gochar Details Section -->
                <div id="gochar-section" class="section">
                    <table id="gocharTable">
                        <thead>
                            <tr>
                                <th>Planet Name</th>
                                <th>Rashi</th>
                                <th>Nakshatra</th>
                                <th>Pada</th>
                                <th>Combust</th>
                                <th>Motion</th>
                                <th>Date of Entry</th>
                                <th>Date of Exit</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
    </section>
    <!-- ____________________________
          Our Footer Comp 
          -------------------- -->

    <footer class="footer-comp">
        <div class="common-container3">

            <div class="footer-flex-bx">

                <div class="left-footer-bx">

                    <div class="left-header-logo flex item-start gap">
                        <img src="./images/astrology.png" alt="">

                        <h6>Astro Nivesh</h6>


                    </div>




                    <p>
                        Astro Nivesh is best astrology website for online Astrology predictions. Talk to Astrologer on
                        call and get answers to all your worries by seeing the future life through Astrology Kundli
                        Predictions from the best Astrologers from India. Get best future predictions related to
                        Marriage, love life, Career or Health over call, chat, query or report.
                    </p>

                </div>


                <div class="right-footer-bx">

                    <div class="footer-bx">
                        <h6>Corporate Info</h6>
                        <div class="footer-li">
                            <li><a href="aboutus.html">About Us</a></li>
                            <li><a href="contactus.html">Contact Us</a></li>
                            <li><a href="termsconditions.html">Terms & Conditions</a></li>
                            <li><a href="privacypolicy.html">Privacy Policy</a></li>
                            <!-- <li><a href="shippingpolicy.html">Shipping Policy</a></li> -->
                            <li><a href="refundpolicy.html">Refund Policy</a></li>
                        </div>
                    </div>


                    <div class="footer-bx">
                        <h6>Contact Info</h6>
                        <div class="footer-li">
                            <li><a href="#"> We are available 24x7 on chat support</a></li>
                            <li><a href="#">Email ID: contact@astronivesh.com</a></li>

                            <div class="soc-icons-flex">
                                <a href="#">
                                    <ion-icon name="logo-facebook"></ion-icon>
                                </a>
                                <a href="#">
                                    <ion-icon name="logo-instagram"></ion-icon>
                                </a>
                                <a href="#">
                                    <ion-icon name="logo-linkedin"></ion-icon>
                                </a>
                                <a href="#">
                                    <ion-icon name="logo-youtube"></ion-icon>
                                </a>
                            </div>

                        </div>
                    </div>


                </div>

            </div>

            <div class="copyright-bx">
                <p>Copyright 2025 Astro Nivesh (This website is owned and managed by Shriram Lalasaheb Magar) | All
                    Rights Reserved | Dev. By: <a href="https://digitaldezire.com/">Digital Dezire</a></p>
            </div>
        </div>
    </footer>
    <script>
        const host = "https://api.astronivesh.com";
        const token = localStorage.getItem("token");
        async function fetchAllData() {
            try {
                const response = await fetch(`${host}/api/auth/getuser`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "auth-token": token
                    }
                });

                if (!response.ok == true) {
                    throw new Error("Failed to fetch data");
                }

                const data = await response.json();
                // console.log(data, "data")
                populatePTable(data)
                populateName(data)
                // localStorage.setItem("admin_id", (data.map((entry) => (entry._id))))
            } catch (error) {
                console.error(error);
                // alert("Error fetching data: " + error.message);
            }
        }

        function populatePTable(data) {
            const tableBody = document.getElementById("profile-body");
            tableBody.innerHTML = "";

            tableBody.innerHTML = `
            <div class="profile-desc">
                <h4>${data.name}</h4>
            </div>
             
            `
        }
        function populateName(data) {
            const tableBody = document.getElementById("profile-name");
            tableBody.innerHTML = "";

            tableBody.innerHTML = `
            <p>${data.name}</p>
             
            `
        }
        document.addEventListener("DOMContentLoaded", function () {
            // console.log(token, "token")
            const loginForm = document.querySelector(".login-info");
            const regInfo = document.querySelector(".reg-info");
            const profileInfo = document.querySelector(".profile-info");

            if (token) {
                // User is logged in, show profile and hide login/signup forms
                loginForm.style.display = "none";
                regInfo.style.display = "none";
                profileInfo.style.display = "block";
            } else {
                // User is not logged in, show login/signup forms
                loginForm.style.display = "block";
                regInfo.style.display = "block";
                profileInfo.style.display = "none";
                window.location.href = "./index.html";
            }

            // Logout functionality
            const logoutBox = document.getElementById("logoutBox");
            if (logoutBox) {
                logoutBox.addEventListener("click", function () {
                    localStorage.removeItem("token");
                    localStorage.removeItem('params');
                    location.reload();
                });
            }
        });
    </script>
    <script>
        function setActive(index) {
            let buttons = document.querySelectorAll(".btn");
            let sections = document.querySelectorAll(".section");

            // Remove active class from all buttons and hide all sections
            buttons.forEach(btn => btn.classList.remove("active"));
            sections.forEach(section => section.classList.remove("visible"));

            // Add active class to clicked button and show corresponding section
            buttons[index].classList.add("active");
            sections[index].classList.add("visible");
        }
    </script>
    <script>
        async function fetchData() {
            try {
                const response = await fetch(`${host}/api/admindetail/all`);
                const data = await response.json();

                const api = data[0]?.apiKey || [];
                const apiKey = api[0]?.apiKey;
                // console.log(data,"data")

                if (!Array.isArray(data) || data.length === 0 || !data[0].gochar || !Array.isArray(data[0].gochar)) {
                    throw new Error("Invalid data format: 'gochar' is missing or not an array.");
                }

                let gocharData = data[0].gochar;
                // console.log(gocharData, "gocharData")
                const normalizeDate = (date) => new Date(date.getFullYear(), date.getMonth(), date.getDate());
                const today = normalizeDate(new Date());

                let filteredData = gocharData.filter(entry => {
                    const entryDate = normalizeDate(new Date(entry.date_of_entry));
                    const exitDate = normalizeDate(new Date(entry.date_of_exit));
                    return today >= entryDate && today <= exitDate;
                });

                filteredData = filteredData.reduce((unique, entry) => {
                    const exitDate = normalizeDate(new Date(entry.date_of_exit));

                    if (exitDate.getTime() === today.getTime()) {
                        unique[entry.planet_name] = entry;
                    } else if (!unique[entry.planet_name]) {
                        unique[entry.planet_name] = entry;
                    }

                    return unique;
                }, {});

                // Convert back to an array
                filteredData = Object.values(filteredData);

                const planetOrder = ["Ascendant", "Sun", "Moon", "Mars", "Mercury", "Jupiter", "Venus", "Saturn", "Rahu", "Ketu"];

                // Sort based on custom planet order
                filteredData.sort((a, b) => {
                    return planetOrder.indexOf(a.planet_name) - planetOrder.indexOf(b.planet_name);
                });

                // const params = JSON.parse(localStorage.getItem('params'));
                // const baseUrl = "https://api.vedicastroapi.com/v3-json";

                // // Convert formattedDate ("Sat Mar 08 2025") to "08/03/2025"
                // const getPanchangData = async (date) => {
                //     const TithiPanchang = `${baseUrl}/panchang/panchang?api_key=${apiKey}&date=${encodeURIComponent(date)}&tz=5.5&lat=${params.lat}&lon=${params.lon}&lang=en`;
                //     const response = await fetch(TithiPanchang);
                //     if (!response.ok) throw new Error("Failed to fetch TithiPanchang data.");
                //     return response.json();
                // };

                // // Get current date in "DD/MM/YYYY" format
                // const currentDate = new Date();
                // const formattedTithiDate = currentDate.toLocaleDateString("en-GB"); // "DD/MM/YYYY"

                // // Get current time in "HH:MM" format
                // const formattedTime = currentDate.toTimeString().slice(0, 5); // "HH:MM"

                // // Fetch current day's Panchang data
                // const TithiPanchangResponse = await getPanchangData(formattedTithiDate);
                // // console.log(TithiPanchangResponse, "TithiPanchangResponse")
                // if (TithiPanchangResponse.length !== 0) {
                //     const tithiPanchangData2 = TithiPanchangResponse.response;
                //     // console.log(tithiPanchangData2, "tithiPanchangData2")

                //     let moonNakshatra = tithiPanchangData2.nakshatra.name;
                //     let sunSign = tithiPanchangData2.sun_position.zodiac;
                //     let moonStart = new Date(tithiPanchangData2.nakshatra.start);
                //     let moonEnd = new Date(tithiPanchangData2.nakshatra.end);
                //     let moonrashi = tithiPanchangData2.rasi.name

                //     // Convert formattedTithiDate and formattedTime to a Date object
                //     let [daymoon, monthmoon, yearmoon] = formattedTithiDate.split("/").map(Number);
                //     let [hoursmoon, minutesmoon] = formattedTime.split(":").map(Number);
                //     let currentDateTime = new Date(yearmoon, monthmoon - 1, daymoon, hoursmoon, minutesmoon);

                //     // console.log(currentDateTime, "currentDateTime")

                //     // Calculate total duration and divide into 4 Padas
                //     let totalDuration = moonEnd - moonStart;
                //     let partDuration = totalDuration / 4;
                //     let part1 = new Date(moonStart.getTime() + partDuration);
                //     let part2 = new Date(moonStart.getTime() + partDuration * 2);
                //     let part3 = new Date(moonStart.getTime() + partDuration * 3);
                //     let part4 = moonEnd;

                //     // console.log(part1, "End of Pada 1");
                //     // console.log(part2, "End of Pada 2");
                //     // console.log(part3, "End of Pada 3");
                //     // console.log(part4, "End of Pada 4");

                //     function getPada(time) {
                //         let dateTime = new Date(time);
                //         if (dateTime >= moonStart && dateTime < part1) {
                //             return 1;
                //         } else if (dateTime >= part1 && dateTime < part2) {
                //             return 2;
                //         } else if (dateTime >= part2 && dateTime < part3) {
                //             return 3;
                //         } else if (dateTime >= part3 && dateTime <= part4) {
                //             return 4;
                //         } else {
                //             return "Out of range";
                //         }
                //     }

                //     let moonpada = getPada(currentDateTime);

                //     // If Pada is out of range, fetch the next day's Panchang
                //     if (moonpada === "Out of range") {
                //         let nextDate = new Date(yearmoon, monthmoon - 1, daymoon + 1);
                //         let nextFormattedDate = nextDate.toLocaleDateString("en-GB").split("/").join("/"); // Convert to YYYY/MM/DD

                //         const nextTithiPanchangResponse = await getPanchangData(nextFormattedDate);
                //         if (nextTithiPanchangResponse.length !== 0) {
                //             const nextTithiPanchangData = nextTithiPanchangResponse.response;
                //             // console.log(nextTithiPanchangData, "nextTithiPanchangData")

                //             let nextMoonNakshatra = nextTithiPanchangData.nakshatra.name;
                //             let nextMoonStart = new Date(nextTithiPanchangData.nakshatra.start);
                //             let nextMoonEnd = new Date(nextTithiPanchangData.nakshatra.end);

                //             let nextTotalDuration = nextMoonEnd - nextMoonStart;
                //             let nextPartDuration = nextTotalDuration / 4;
                //             let nextPart1 = new Date(nextMoonStart.getTime() + nextPartDuration);
                //             let nextPart2 = new Date(nextMoonStart.getTime() + nextPartDuration * 2);
                //             let nextPart3 = new Date(nextMoonStart.getTime() + nextPartDuration * 3);
                //             let nextPart4 = nextMoonEnd;

                //             //         console.log(nextPart1, "End of nextPart 1");
                //             // console.log(nextPart2, "End of nextPart 2");
                //             // console.log(nextPart3, "End of nextPart 3");
                //             // console.log(nextPart4, "End of nextPart 4");

                //             function getPada2(time) {
                //                 let dateTime = new Date(time);

                //                 if (dateTime >= moonStart && dateTime < nextPart1) {
                //                     return 1;
                //                 } else if (dateTime >= nextPart1 && dateTime < nextPart2) {
                //                     return 2;
                //                 } else if (dateTime >= nextPart2 && dateTime < nextPart3) {
                //                     return 3;
                //                 } else if (dateTime >= nextPart3 && dateTime <= nextPart4) {
                //                     return 4;
                //                 } else {
                //                     return "Out of range";
                //                 }
                //             }

                //             let nextMoonPada = getPada2(currentDateTime);
                //             moonpada = nextMoonPada
                //             // console.log(nextMoonPada, "nextMoonPada")
                //             moonNakshatra = nextMoonNakshatra
                //         }
                //     }
                //     console.log(moonNakshatra, moonpada, "moon")
                // }

                // Populate the table
                const tableBody = document.querySelector("#gocharTable tbody");
                tableBody.innerHTML = "";

                filteredData.forEach(entry => {
                    const row = `<tr>
                <td>${entry.planet_name || "N/A"}</td>
                <td>${entry.rashi || "N/A"}</td>
                <td>${entry.nakshatra || "N/A"}</td>
                <td>${entry.pada || "N/A"}</td>
                <td>${entry.combust ? "Yes" : "No"}</td>
                <td>${entry.motion || "N/A"}</td>
                <td>${entry.date_of_entry || "N/A"}</td>
                <td>${entry.date_of_exit || "N/A"}</td>
            </tr>`;
                    tableBody.innerHTML += row;
                });

            } catch (error) {
                console.error("Error fetching data:", error);
            }
        }

        fetchData();
    </script>

    <script>
        function showChart(chartType) {
            // Get chart containers and buttons
            const lagnaChart = document.getElementById("horoscope-chart1");
            const navamsaChart = document.getElementById("horoscope-chart2");
            const moreChart = document.getElementById("horoscope-chart3");
            const lagnaBtn = document.getElementById("lagna-btn");
            const navamsaBtn = document.getElementById("navamsa-btn");

            if (chartType === "lagna") {
                lagnaChart.style.display = "block";
                navamsaChart.style.display = "none";
                lagnaBtn.classList.add("active");
                navamsaBtn.classList.remove("active");
            } else if (chartType === "navamsa") {
                lagnaChart.style.display = "none";
                navamsaChart.style.display = "block";
                navamsaBtn.classList.add("active");
                lagnaBtn.classList.remove("active");
            }
        }
    </script>
    <script>

    </script>

    <script>
        const nakshatraPadas = [];
        const nakshatras = [
            "Ashvini", "Bharani", "Krittika", "Rohini", "Mrigashira", "Ardra",
            "Punarvasu", "Pushya", "Ashlesha", "Magha", "PurvaPhalguni", "UttaraPhalguni",
            "Hasta", "Chitra", "Svati", "Vishakha", "Anuradha", "Jyeshtha", "Mula",
            "PurvaShadha", "UttraShadha", "Sravana", "Dhanista", "Shatabhisha",
            "PurvaBhadra", "UttaraBhadra", "Revati"
        ];

        const rashis = [
            "Aries", "Taurus", "Gemini", "Cancer", "Leo", "Virgo", "Libra", "Scorpio",
            "Sagittarius", "Capricorn", "Aquarius", "Pisces"
        ];

        const zodiacMap = {
            Aries: 1,
            Taurus: 2,
            Gemini: 3,
            Cancer: 4,
            Leo: 5,
            Virgo: 6,
            Libra: 7,
            Scorpio: 8,
            Sagittarius: 9,
            Capricorn: 10,
            Aquarius: 11,
            Pisces: 12,
        };
    </script>
    <script>
        const planets = ["Sun", "Moon", "Mars", "Mercury", "Jupiter", "Venus", "Saturn", "Rahu", "Ketu"];
        const ucchaNeechaData = {
            "Sun": { exalted: "Aries", debilitated: "Libra" },
            "Moon": { exalted: "Taurus", debilitated: "Scorpio" },
            "Mars": { exalted: "Capricorn", debilitated: "Cancer" },
            "Mercury": { exalted: "Virgo", debilitated: "Pisces" },
            "Jupiter": { exalted: "Cancer", debilitated: "Capricorn" },
            "Venus": { exalted: "Pisces", debilitated: "Virgo" },
            "Saturn": { exalted: "Libra", debilitated: "Aries" },
            "Rahu": { exalted: "Gemini", debilitated: "Sagittarius" },
            "Ketu": { exalted: "Sagittarius", debilitated: "Gemini" }
        };

        const planetaryRelations = {
            "Sun": { friends: ["Moon", "Mars", "Jupiter"], enemies: ["Venus", "Saturn"] },
            "Moon": { friends: ["Sun", "Mercury"], enemies: ["Rahu", "Ketu"] },
            "Mars": { friends: ["Sun", "Moon", "Jupiter"], enemies: ["Mercury"] },
            "Mercury": { friends: ["Sun", "Venus"], enemies: ["Moon", "Mars"] },
            "Jupiter": { friends: ["Sun", "Moon", "Mars"], enemies: ["Venus", "Mercury"] },
            "Venus": { friends: ["Mercury", "Saturn"], enemies: ["Sun", "Moon"] },
            "Saturn": { friends: ["Venus", "Mercury"], enemies: ["Sun", "Moon", "Mars"] },
            "Rahu": { friends: ["Venus", "Saturn", "Mercury"], enemies: ["Sun", "Moon", "Mars"] },
            "Ketu": { friends: ["Saturn"], enemies: ["Sun", "Moon"] }
        };

        const rashiLords = {
            "Aries": "Mars", "Taurus": "Venus", "Gemini": "Mercury", "Cancer": "Moon",
            "Leo": "Sun", "Virgo": "Mercury", "Libra": "Venus", "Scorpio": "Mars",
            "Sagittarius": "Jupiter", "Capricorn": "Saturn", "Aquarius": "Saturn", "Pisces": "Jupiter"
        };

        const nakshatraLords = {
            "Ashvini": "Ketu", "Bharani": "Venus", "Krittika": "Sun", "Rohini": "Moon",
            "Mrigashira": "Mars", "Ardra": "Rahu", "Punarvasu": "Jupiter", "Pushya": "Saturn",
            "Ashlesha": "Mercury", "Magha": "Ketu", "Purva Phalguni": "Venus", "UttaraPhalguni": "Sun",
            "Hasta": "Moon", "Chitra": "Mars", "Svati": "Rahu", "Vishakha": "Jupiter",
            "Anuradha": "Saturn", "Jyeshtha": "Mercury", "Mula": "Ketu", "PurvaShadha": "Venus",
            "UttraShadha": "Sun", "Sravana": "Moon", "Dhanista": "Mars", "Shatabhisha": "Rahu",
            "PurvaBhadra": "Jupiter", "UttaraBhadra": "Saturn", "Revati": "Mercury"
        };

        const ucchaNeechaDegrees = {
            "Sun": { exalted: { nakshatra: "Bharani", pada: 2 }, debilitated: { nakshatra: "Svati", pada: 1 } },
            "Moon": { exalted: { nakshatra: "Krittika", pada: 1 }, debilitated: { nakshatra: "Anuradha", pada: 4 } },
            "Mars": { exalted: { nakshatra: "Dhanista", pada: 1 }, debilitated: { nakshatra: "Pushya", pada: 4 } },
            "Mercury": { exalted: { nakshatra: "UttaraPhalguni", pada: 4 }, debilitated: { nakshatra: "UttaraBhadra", pada: 2 } },
            "Jupiter": { exalted: { nakshatra: "Punarvasu", pada: 4 }, debilitated: { nakshatra: "Dhanista", pada: 2 } },
            "Venus": { exalted: { nakshatra: "UttaraBhadra", pada: 4 }, debilitated: { nakshatra: "UttaraPhalguni", pada: 2 } },
            "Saturn": { exalted: { nakshatra: "Svati", pada: 3 }, debilitated: { nakshatra: "Ashvini", pada: 4 } },
            "Rahu": { exalted: { nakshatra: "Rohini", pada: 2 }, debilitated: { nakshatra: "Jyeshtha", pada: 1 } },
            "Ketu": { exalted: { nakshatra: "Jyeshtha", pada: 4 }, debilitated: { nakshatra: "Rohini", pada: 3 } }
        };

        const planetaryRelations2 = {
            "Sun": { friends: ["Moon", "Mars", "Jupiter"], enemies: ["Venus", "Saturn"] },
            "Moon": { friends: ["Sun", "Mercury"], enemies: ["Rahu", "Ketu"] },
            "Mars": { friends: ["Sun", "Moon", "Jupiter"], enemies: ["Mercury"] },
            "Mercury": { friends: ["Sun", "Venus"], enemies: ["Moon", "Mars"] },
            "Jupiter": { friends: ["Sun", "Moon", "Mars"], enemies: ["Venus", "Mercury"] },
            "Venus": { friends: ["Mercury", "Saturn"], enemies: ["Sun", "Moon"] },
            "Saturn": { friends: ["Venus", "Mercury"], enemies: ["Sun", "Moon", "Mars"] },
            "Rahu": { friends: ["Venus", "Saturn", "Mercury"], enemies: ["Sun", "Moon"] },
            "Ketu": { friends: ["Mars", "Venus", "Saturn"], enemies: ["Sun", "Moon"] }
        };
    </script>
    <script>
        async function fetchUserData() {
            try {
                const response = await fetch(`${host}/api/detail/fetchalldetail`, {
                    method: "GET",
                    headers: {
                        "Content-Type": "application/json",
                        "auth-token": token
                    }
                });

                const response2 = await fetch(`${host}/api/admindetail/all`);
                const data = await response2.json();

                if (!Array.isArray(data) || data.length === 0 || !data[0].gochar || !Array.isArray(data[0].gochar)) {
                    throw new Error("Invalid data format: 'gochar' is missing or not an array.");
                }

                let gocharData = data[0].gochar;
                // console.log(gocharData, "gocharData")
                const normalizeDate = (date) => new Date(date.getFullYear(), date.getMonth(), date.getDate());
                const today = normalizeDate(new Date());

                let filteredData = gocharData.filter(entry => {
                    const entryDate = normalizeDate(new Date(entry.date_of_entry));
                    const exitDate = normalizeDate(new Date(entry.date_of_exit));
                    return today >= entryDate && today <= exitDate;
                });

                filteredData = filteredData.reduce((unique, entry) => {
                    const exitDate = normalizeDate(new Date(entry.date_of_exit));

                    if (exitDate.getTime() === today.getTime()) {
                        unique[entry.planet_name] = entry;
                    } else if (!unique[entry.planet_name]) {
                        unique[entry.planet_name] = entry;
                    }

                    return unique;
                }, {});

                // Convert back to an array
                filteredData = Object.values(filteredData);

                // console.log(filteredData, "Filtered gocharData");

                if (!response.ok) {
                    throw new Error("Failed to fetch data");
                }

                const datass = await response.json();
                // console.log(datass, "data")
                initializeData(datass, gocharData)
            } catch (error) {
                console.error("Error fetching data:", error);
            }
        }
        fetchUserData()


        nakshatras.forEach((nakshatra, index) => {
            for (let pada = 1; pada <= 4; pada++) {
                const rashiIndex = Math.floor((index * 4 + (pada - 1)) / 9) % 12;
                nakshatraPadas.push({ nakshatra, pada, rashi: rashis[rashiIndex] });
            }
        });

        function getStatus(planet, rashi) {
            const exaltedSign = ucchaNeechaData[planet]?.exalted;
            const debilitatedSign = ucchaNeechaData[planet]?.debilitated;

            if (rashi === exaltedSign) return "Uccha (Exalted)";
            if (rashi === debilitatedSign) return "Neecha (Debilitated)";

            const rashiLord = rashiLords[rashi];
            const friends = planetaryRelations[planet]?.friends || [];
            const enemies = planetaryRelations[planet]?.enemies || [];

            if (rashiLord === planet) return "Own";
            if (friends.includes(rashiLord)) return "Mitra (Friend)";
            if (enemies.includes(rashiLord)) return "Shatru (Enemy)";

            return "Neutral";
        }

        const position = []; // Store objects in an array
        function displayAllStatuses() {
            planets.forEach(planet => {
                // console.log(planet, "planets")
                rashis.forEach(rashi => {
                    const status = getStatus(planet, rashi);
                    // console.log(status, "status")
                    position.push({
                        planet: planet,
                        rashi: rashi,
                        status: status
                    });
                });
            });
        }
        displayAllStatuses();
        // console.log(position, "position");

        // Nakshatra status
        function getStatusNak(planet, nakshatra, pada) {
            const exalted = ucchaNeechaDegrees[planet].exalted;
            const debilitated = ucchaNeechaDegrees[planet].debilitated;

            if (nakshatra === exalted.nakshatra && pada === exalted.pada) return "Uccha (Exalted)";
            if (nakshatra === debilitated.nakshatra && pada === debilitated.pada) return "Neecha (Debilitated)";

            const nakshatraLord = nakshatraLords[nakshatra];
            const friends = planetaryRelations2[planet].friends;
            const enemies = planetaryRelations2[planet].enemies;

            if (friends.includes(nakshatraLord)) return "Mitra (Friend)";
            if (enemies.includes(nakshatraLord)) return "Shatru (Enemy)";

            return "Neutral";
        }
        const nakshatraPosition = [];
        function displayStatus() {
            planets.forEach(planet => {
                nakshatras.forEach(nakshatra => {
                    for (let pada = 1; pada <= 4; pada++) {
                        const status = getStatusNak(planet, nakshatra, pada);

                        nakshatraPosition.push({
                            planet: planet,
                            nakshatra: nakshatra,
                            pada: pada,
                            status: status
                        });
                    }
                });
            })
        }
        displayStatus();

        async function initializeData(datass, gocharData, selectedHouse = "1") {
            let GocharData = gocharData;
            let horoscopeData = datass[0]?.horoscopeData || [];
            let dashas = datass[0]?.dashas || [];
            let rashiData = datass[0]?.rashiData || [];
            let chart1Url = datass[0]?.chart1Url || [];
            let chart2Url = datass[0]?.chart2Url || [];
            // Function to populate the table
            const populateHouseTable = (selectedHouse = "1") => {
                // const resultTable = document.getElementById("resultbody").querySelector("tbody");
                // resultTable.innerHTML = "";

                // Get horoscopeData from localStorage

                let planets = [];

                if (horoscopeData && horoscopeData.response) {
                    const planetDatas = horoscopeData.response;

                    const createHouses = (startZodiacNumber) => {
                        const houses = [];
                        let currentNumber = startZodiacNumber;
                        for (let i = 0; i < 12; i++) {
                            houses.push(currentNumber);
                            currentNumber = currentNumber === 12 ? 1 : currentNumber + 1;
                        }
                        return houses;
                    };

                    // Map Planet Data
                    const mapHPlanetData = (data) => {
                        if (Array.isArray(data)) {
                            return data.map((planet) => ({
                                name: planet.full_name,
                                nakshatra: planet.nakshatra,
                                pada: planet.nakshatra_pada,
                                retro: planet.retro,
                                is_combust: planet.is_combust,
                                zodiac: planet.zodiac,
                                zodiacNumber: zodiacMap[planet.zodiac] || "-",
                                houses: createHouses(zodiacMap[planet.zodiac] || 1),
                            }));
                        } else if (typeof data === "object" && data !== null) {
                            return Object.values(data).map((planet) => ({
                                name: planet.full_name,
                                nakshatra: planet.nakshatra,
                                pada: planet.nakshatra_pada,
                                retro: planet.retro,
                                is_combust: planet.is_combust,
                                zodiac: planet.zodiac,
                                zodiacNumber: zodiacMap[planet.zodiac] || "-",
                                houses: createHouses(zodiacMap[planet.zodiac] || 1),
                            }));
                        } else {
                            console.error("Unexpected data format for planets:", data);
                            return [];
                        }
                    };

                    planets = mapHPlanetData(planetDatas).slice(0, 10);
                }

                const defaultNakshatra = planets[0]?.nakshatra || "Ashvini";
                const defaultPada = planets[0]?.pada || 1;

                let currentIndex = nakshatraPadas.findIndex(
                    (n) => n.nakshatra === defaultNakshatra && n.pada === defaultPada
                );

                let currentIndex2 = nakshatraPadas.findIndex(
                    (n) => n.nakshatra === defaultNakshatra && n.pada === defaultPada
                );


                let storedPadas = [];
                let comparisonData = []; // Store comparison data for use in resultTable


                for (let house = 1; house <= 12; house++) {
                    currentIndex2 = (currentIndex2 + 9) % nakshatraPadas.length;

                    for (let i = 0; i < 10; i++) {
                        const padaIndex = (currentIndex2 + i) % nakshatraPadas.length;
                        const pada = nakshatraPadas[padaIndex];
                        storedPadas.push(nakshatraPadas[padaIndex]);
                    }
                }
                for (let house = 1; house <= 12; house++) {
                    if (selectedHouse !== "all" && house !== parseInt(selectedHouse, 10)) {
                        currentIndex = (currentIndex + 9) % nakshatraPadas.length;
                        continue;
                    }

                    const ascendant = planets[0];
                    const ascendantHouseValue = ascendant.houses[selectedHouse - 1];
                    // console.log(ascendant)


                    planets.forEach((planet) => {
                        // console.log(planet,"planet")
                        let oneHundredPercent = "-";
                        let seventyFivePercent = "-";
                        let fiftyPercent = "-";
                        let twentyFivePercent = "-";

                        if (selectedHouse === "5" || selectedHouse === "9") {
                            let matchingPlanets = ["Jupiter", "Rahu", "Ketu"].filter(name => name === planet.name);
                            if (matchingPlanets.length > 0) {
                                oneHundredPercent = matchingPlanets.join(", ");
                            }
                        }
                        if (selectedHouse === "4" || selectedHouse === "8") {
                            let matchingPlanets = ["Mars"].filter(name => name === planet.name);
                            if (matchingPlanets.length > 0) {
                                oneHundredPercent = matchingPlanets.join(", ");
                            }
                        }
                        if (selectedHouse === "3" || selectedHouse === "10") {
                            let matchingPlanets = ["Saturn"].filter(name => name === planet.name);
                            if (matchingPlanets.length > 0) {
                                oneHundredPercent = matchingPlanets.join(", ");
                            }
                        }
                        if (planet.houses[0] === ascendantHouseValue || planet.houses[6] === ascendantHouseValue) {
                            oneHundredPercent = planet.name;
                        }
                        if (planet.houses[3] === ascendantHouseValue || planet.houses[7] === ascendantHouseValue) {
                            seventyFivePercent = planet.name;
                        }
                        if (planet.houses[4] === ascendantHouseValue || planet.houses[8] === ascendantHouseValue) {
                            fiftyPercent = planet.name;
                        }
                        if (planet.houses[2] === ascendantHouseValue || planet.houses[9] === ascendantHouseValue) {
                            twentyFivePercent = planet.name;
                        }

                        // Save comparison data
                        comparisonData.push({
                            name: planet.name,
                            oneHundredPercent,
                            seventyFivePercent,
                            fiftyPercent,
                            twentyFivePercent,
                        });
                    });


                    for (let i = 0; i < 9; i++) {
                        const padaIndex = (currentIndex + i) % nakshatraPadas.length;
                        const pada = nakshatraPadas[padaIndex];
                        // console.log(pada, "pada")

                        // Find all matching planets
                        const matchingPlanets = planets.filter(
                            (planet) => planet.nakshatra === pada.nakshatra && planet.pada === pada.pada
                        );


                        let planetNames = matchingPlanets.length > 0 ? matchingPlanets.map((planet) => planet.name).join(", ") : "-";
                        let dashakeys = [];

                        matchingPlanets.forEach((planet) => {
                            Object.entries(dashas).forEach(([key, value]) => {
                                if (value.name === planet.name) {
                                    dashakeys.push(key, value);
                                }
                            });
                        });

                        const dashaText = dashakeys.length > 0 ? `(${dashakeys.join(", ")})` : "";
                        // console.log(dashakeys,"dashaText")

                        // Find planets with percentage matches
                        let oneHundredPercentNames = comparisonData
                            .filter((data) => data.oneHundredPercent !== "-")
                            .map((data) => data.oneHundredPercent);
                        let seventyFivePercentNames = comparisonData
                            .filter((data) => data.seventyFivePercent !== "-")
                            .map((data) => data.seventyFivePercent);
                        let fiftyPercentNames = comparisonData
                            .filter((data) => data.fiftyPercent !== "-")
                            .map((data) => data.fiftyPercent);
                        let twentyFivePercentNames = comparisonData
                            .filter((data) => data.twentyFivePercent !== "-")
                            .map((data) => data.twentyFivePercent);

                        const retroPlanets = matchingPlanets.filter((planet) => planet.retro).map(() => "R").join(", ");
                        const combustPlanets = matchingPlanets.filter((planet) => planet.is_combust).map(() => "C").join(", ");
                        comparisonData.push({
                            pada: pada,
                        });
                    }

                    // console.log(comparisonData,"comparisonData")

                    // let planetTable = document.getElementById("planetTable");
                    // let matchedTable = document.getElementById("matchedTable");
                    let selectedDivisional = document.getElementById("divisionalSelect").value;
                    let selectedRasNak = document.getElementById("rashiNakSelect").value;

                    updateTable(comparisonData, storedPadas, position, nakshatraPosition);
                    function updateTable(comparisonData, padas, position, nakshatraPosition) {
                        let divisionalData = rashiData[selectedDivisional];
                        // console.log(rashiData, "rashiData")
                        // console.log(position, "position")
                        // console.log(nakshatraPosition, "nakshatraPosition")
                        // console.log(selectedRasNak, "selectedRasNak")
                        // console.log(comparisonData, "comparisonData")

                        // planetTable.innerHTML = ``;

                        let allMatchingPlanets = [];

                        if (padas && Array.isArray(padas)) {
                            padas.forEach((pada) => {
                                let matchingPlanets = planets.filter(
                                    (planet) => planet.nakshatra === pada.nakshatra && planet.pada === pada.pada
                                );

                                if (matchingPlanets.length > 0) {
                                    allMatchingPlanets.push(...matchingPlanets);
                                }
                            });
                        }

                        // Sorting function
                        comparisonData.sort((a, b) => {
                            let getValue = (data) => {
                                if (data.oneHundredPercent && data.oneHundredPercent !== "-") return 100;
                                if (data.seventyFivePercent && data.seventyFivePercent !== "-") return 75;
                                if (data.fiftyPercent && data.fiftyPercent !== "-") return 50;
                                if (data.twentyFivePercent && data.twentyFivePercent !== "-") return 25;
                                return 0;
                            };

                            // Sort by Nakshatra first (alphabetically)
                            let nakshatraA = a.nakshatra || "";
                            let nakshatraB = b.nakshatra || "";
                            let nakshatraDiff = nakshatraA.localeCompare(nakshatraB);
                            if (nakshatraDiff !== 0) return nakshatraDiff;

                            // Sort by Pada (ascending order)
                            let padaA = a.pada ? parseInt(a.pada) : 0;
                            let padaB = b.pada ? parseInt(b.pada) : 0;
                            if (padaA !== padaB) return padaA - padaB;

                            // Sort by percentage (descending order)
                            return getValue(b) - getValue(a);
                        });

                        let firstTableData = [];
                        let secondTableData = [];

                        comparisonData.forEach((data) => {
                            // console.log(data, "data");
                            let planetName = data.planetName && data.planetName !== "-" ? data.planetName : null;

                            let hundred = data.oneHundredPercent && data.oneHundredPercent !== "-" ? data.oneHundredPercent : "";
                            let seventyFive = data.seventyFivePercent && data.seventyFivePercent !== "-" ? data.seventyFivePercent : "";
                            let fifty = data.fiftyPercent && data.fiftyPercent !== "-" ? data.fiftyPercent : "";
                            let twentyFive = data.twentyFivePercent && data.twentyFivePercent !== "-" ? data.twentyFivePercent : "";

                            let percentageText = "";
                            if (!planetName) {
                                if (hundred) {
                                    planetName = hundred;
                                    percentageText = " ";
                                } else if (seventyFive) {
                                    planetName = seventyFive;
                                    percentageText = " 75%";
                                } else if (fifty) {
                                    planetName = fifty;
                                    percentageText = " 50%";
                                } else if (twentyFive) {
                                    planetName = twentyFive;
                                    percentageText = " 25%";
                                } else {
                                    planetName = null;
                                }
                            } else {
                                if (hundred === planetName) {
                                    percentageText = " ";
                                } else if (seventyFive === planetName) {
                                    percentageText = " 75%";
                                } else if (fifty === planetName) {
                                    percentageText = " 50%";
                                } else if (twentyFive === planetName) {
                                    percentageText = " 25%";
                                }
                            }

                            if (planetName) {
                                if (planetName === "Ascendant" && selectedHouse !== "1") {
                                    return;
                                }

                                const matchedPlanet = allMatchingPlanets.find((p) => p.name === planetName);
                                const retro = matchedPlanet?.retro;
                                const combust = matchedPlanet?.is_combust;

                                let retroPlanet = retro ? '&#8634;' : "";
                                let combustPlanet = combust ? '&#128293;' : "";

                                let matchedNakshatra = matchedPlanet?.nakshatra || "";
                                let matchedPada = matchedPlanet?.pada || "";

                                let matchedD = [];
                                if (divisionalData) {
                                    matchedD = divisionalData.find((i) => i.name === planetName);
                                }
                                let matchedRashis = matchedD?.zodiac || "";

                                let positionValue = [];
                                let status = [];

                                if (selectedRasNak === "Rashi") {
                                    positionValue = position.find((i) => i.planet === planetName && i.rashi === matchedRashis);

                                    if (positionValue?.status === "Uccha (Exalted)") {
                                        status = 'color-pos-bx1';
                                    } else if (positionValue?.status === "Own") {
                                        status = 'color-pos-bx2';
                                    } else if (positionValue?.status === "Mitra (Friend)") {
                                        status = 'color-pos-bx3';
                                    } else if (positionValue?.status === "Neutral") {
                                        status = 'color-pos-bx4';
                                    } else if (positionValue?.status === "Shatru (Enemy)") {
                                        status = 'color-pos-bx5';
                                    } else if (positionValue?.status === "Neecha (Debilitated)") {
                                        status = 'color-pos-bx6';
                                    }
                                } else {
                                    positionValue = nakshatraPosition.find((i) => i.planet === planetName && i.nakshatra === matchedNakshatra && i.pada === matchedPada);

                                    if (positionValue?.status === "Uccha (Exalted)") {
                                        status = 'color-pos-bx1';
                                    } else if (positionValue?.status === "Mitra (Friend)") {
                                        status = 'color-pos-bx3';
                                    } else if (positionValue?.status === "Neutral") {
                                        status = 'color-pos-bx4';
                                    } else if (positionValue?.status === "Shatru (Enemy)") {
                                        status = 'color-pos-bx5';
                                    } else if (positionValue?.status === "Neecha (Debilitated)") {
                                        status = 'color-pos-bx6';
                                    }
                                }

                                // console.log(positionValue,"positionValue")

                                let dashakeys = [];
                                Object.entries(dashas).forEach(([key, value]) => {
                                    if (value.name === planetName) {
                                        dashakeys.push({ key, value });
                                    }
                                });

                                // let dashaText = dashakeys.length > 0 ? `(${dashakeys.join(", ")})` : "-";

                                const dashaLabels = {
                                    major: "Mahadasha (MD)",
                                    minor: "Antardasha (AD)",
                                    sub_minor: "Pratyantar Dasha (PD)",
                                    sub_sub_minor: "Sookshma Dasha (SD)"
                                };

                                let dashaForms = dashakeys.map(({ key }) => dashaLabels[key] || key);

                                // Extract actual dasha values (ensuring valid data)
                                let dashaValues = dashakeys.map(({ value }) => value ? value : null).filter(Boolean);

                                // Format outputs
                                let dashaForm = dashaForms.length > 0 ? dashaForms.join(", ") : "-";
                                let dashavalueForm = dashaValues.length > 0 ? dashaValues : "-";

                                let dashaStart = dashaValues.length > 0 ? new Date(dashaValues[0].start).toISOString().split("T")[0] : "-";
                                let dashaEnd = dashaValues.length > 0 ? new Date(dashaValues[0].end).toISOString().split("T")[0] : "-";

                                // console.log(dashaStart, "dashaStart");
                                // console.log(dashaEnd, "dashaEnd");


                                // Store in an array
                                firstTableData.push({
                                    nakshatra: matchedNakshatra,
                                    pada: matchedPada,
                                    rashi: matchedRashis,
                                    planet: planetName,
                                    positionValue: positionValue,
                                    status: status,
                                    percentageText: percentageText,
                                    retroPlanet: retroPlanet,
                                    combustPlanet: combustPlanet,
                                    dashaForm: dashaForm,
                                    dashaStart: dashaStart,
                                    dashaEnd: dashaEnd
                                });

                                // Append planet data row
                                //                             const row = `
                                //     <tr>
                                //         <td class="td-span">
                                //             <span>${matchedNakshatra}(${matchedPada})</span>
                                //         </td>
                                //         <td class="td-span">
                                //             <span>${matchedRashis}</span>
                                //         </td>
                                //         <td class="td-span">
                                //             <span>${planetName} ${percentageText} ${retroPlanet} ${combustPlanet}</span>
                                //         </td>
                                //         <td class="td-span">
                                //             <div class="color-bx ${status}" data-tooltip="${positionValue?.status ? positionValue.status : ''}"></div>
                                //         </td>
                                //         <td class="td-span">
                                //             <span>${dashaForm}</span>
                                //         </td>
                                //     </tr>
                                // `;

                                //                             planetTable.innerHTML += row;
                            }
                        });

                        // ADD PADA DETAILS EVEN IF NO PLANETS MATCH
                        comparisonData.forEach((data) => {
                            // console.log(data, "data");

                            let planetName = data.planetName && data.planetName !== "-" ? data.planetName : null;

                            let matchedPadas = data.pada?.pada || "";
                            let matchedNakshatras = data.pada?.nakshatra || "";
                            let matchedRashi = data.pada?.rashi || "";
                            if (matchedPadas) {
                                secondTableData.push({
                                    nakshatra: matchedNakshatras,
                                    pada: matchedPadas,
                                    rashi: matchedRashi
                                });
                                //                                 const row = `
                                // <tr>
                                // <td class="td-span"><span>${matchedNakshatras}(${matchedPadas})</span></td>
                                // <td class="td-span"><span>${matchedRashi}</span></td>
                                // <td class="td-span"><span>${planetName || "-"}</span></td>
                                // <td class="td-span"><span>-</span></td>
                                // <td class="td-span"><span>-</span></td>
                                // </tr>
                                // `;

                                //                                 planetTable.innerHTML += row;
                            }

                        });
                        // Compare and generate the third table
                        let thirdTableContent = "";
                        let fourthTableContent = "";
                        let fifthTableContent = "";
                        let matchedNakshatras = new Set();
                        let matchedPlanets = new Set(); // Track planets added to the third table

                        secondTableData.forEach((entry2) => {
                            let matches = firstTableData.filter(entry1 => entry1.nakshatra === entry2.nakshatra);
                            let matchPlanetsList = matches.filter((i) => i.pada === entry2.pada);
                            // console.log(matches, "matches")
                            // console.log(matchPlanetsList,"matchPlanetsList")

                            // Extract and join all matching planet-related values
                            let planetsText = matchPlanetsList.map(mp => mp.planet).join(", ");
                            let percentageText = matchPlanetsList.map(mp => mp.percentageText).join(", ");
                            let retroPlanets = matchPlanetsList.map(mp => mp.retroPlanet).join(", ");
                            let combustPlanets = matchPlanetsList.map(mp => mp.combustPlanet).join(", ");
                            let statusClass = matchPlanetsList.length > 0 ? matchPlanetsList[0].status : "-";
                            let positionStatus = matchPlanetsList.length > 0 ? matchPlanetsList[0].positionValue : "-";
                            let dashaform2 = matchPlanetsList.length > 0 ? matchPlanetsList[0].dashaForm : "-"
                            let dashaformStart = matchPlanetsList.length > 0 ? matchPlanetsList[0].dashaStart : "-"
                            let dashaformEnd = matchPlanetsList.length > 0 ? matchPlanetsList[0].dashaEnd : "-"

                            if (!planetsText) {
                                const planetText2 = planets.find(j => j.nakshatra === entry2.nakshatra && j.pada === entry2.pada);
                                planetsText = planetText2 ? planetText2.name : "";
                                retroPlanets = planetText2?.retro === true ? '&#8634;' : "";
                                combustPlanets = planetText2?.is_combust === true ? '&#128293;' : "";

                                let matchedD = [];
                                if (divisionalData) {
                                    matchedD = divisionalData.find((i) => i.name === planetText2?.name);
                                }
                                // console.log(matchedD,"matchedD")
                                let matchedRashis = matchedD?.zodiac || "";
                                // console.log(matchedRashis,"matchedRashis")

                                let positionValue = [];
                                let status = [];

                                if (selectedRasNak === "Rashi") {
                                    positionValue = position.find((i) => i.planet === planetText2?.name && i.rashi === matchedRashis);
                                    if (positionValue?.status === "Uccha (Exalted)") {
                                        status = 'color-pos-bx1';
                                    } else if (positionValue?.status === "Own") {
                                        status = 'color-pos-bx2';
                                    } else if (positionValue?.status === "Mitra (Friend)") {
                                        status = 'color-pos-bx3';
                                    } else if (positionValue?.status === "Neutral") {
                                        status = 'color-pos-bx4';
                                    } else if (positionValue?.status === "Shatru (Enemy)") {
                                        status = 'color-pos-bx5';
                                    } else if (positionValue?.status === "Neecha (Debilitated)") {
                                        status = 'color-pos-bx6';
                                    }
                                } else {
                                    positionValue = nakshatraPosition.find((i) => i.planet === planetText2?.name && i.nakshatra === planetText2?.nakshatra && i.pada === planetText2?.pada);

                                    if (positionValue?.status === "Uccha (Exalted)") {
                                        status = 'color-pos-bx1';
                                    } else if (positionValue?.status === "Mitra (Friend)") {
                                        status = 'color-pos-bx3';
                                    } else if (positionValue?.status === "Neutral") {
                                        status = 'color-pos-bx4';
                                    } else if (positionValue?.status === "Shatru (Enemy)") {
                                        status = 'color-pos-bx5';
                                    } else if (positionValue?.status === "Neecha (Debilitated)") {
                                        status = 'color-pos-bx6';
                                    }
                                }
                                statusClass = status;
                                positionStatus = positionValue;
                                // console.log(status,"status")

                                let dashakeys = [];
                                Object.entries(dashas).forEach(([key, value]) => {
                                    if (value.name === planetText2?.name) {
                                        dashakeys.push({ key, value });
                                    }
                                });

                                // let dashaText = dashakeys.length > 0 ? `(${dashakeys.join(", ")})` : "-";

                                const dashaLabels = {
                                    major: "Mahadasha (MD)",
                                    minor: "Antardasha (AD)",
                                    sub_minor: "Pratyantar Dasha (PD)",
                                    sub_sub_minor: "Sookshma Dasha (SD)"
                                };

                                let dashaForms = dashakeys.map(({ key }) => dashaLabels[key] || key);

                                // Extract actual dasha values (ensuring valid data)
                                let dashaValues = dashakeys.map(({ value }) => value ? value : null).filter(Boolean);

                                // Format outputs
                                let dashaForm = dashaForms.length > 0 ? dashaForms.join(", ") : "-";
                                let dashavalueForm = dashaValues.length > 0 ? dashaValues : "-";

                                let dashaStart = dashaValues.length > 0 ? new Date(dashaValues[0].start).toISOString().split("T")[0] : "-";
                                let dashaEnd = dashaValues.length > 0 ? new Date(dashaValues[0].end).toISOString().split("T")[0] : "-";

                                dashaform2 = dashaForm
                                dashaformStart = dashaStart
                                dashaformEnd = dashaEnd

                            }
                            // Add all matched planets to the set
                            matchPlanetsList.forEach(mp => matchedPlanets.add(mp.planet));
                            if (planetsText.includes("Ascendant")) {
                                percentageText = " "
                                retroPlanets = " "
                                combustPlanets = " "
                            }
                            thirdTableContent += `
        <tr>
            <td class="td-span"><span>${entry2.nakshatra}(${entry2.pada})</span></td>
            <td class="td-span"><span>${entry2.rashi}</span></td>
            <td class="td-span"><span>${planetsText || "-"} ${percentageText ? percentageText : " "} ${retroPlanets ? retroPlanets : " "} ${combustPlanets ? combustPlanets : " "} </span></td>
            <td class="td-span">
                <div class="color-bx ${statusClass}" data-tooltip="${positionStatus?.status}"></div>
            </td>
            <td class="td-span">
                <span>${dashaform2 !== "-" && dashaform2 ?
                                    `${dashaform2} <i class="color-bx color-pos-bx4 fa-regular fa-eye mx-2" data-tooltip="${dashaformStart} - ${dashaformEnd}"></i>`
                                    : "-"}</span>
            </td>
        </tr>`;
                        });

                        // Find Nakshatras in Table 1 that are not in Table 2 and exclude matched planets
                        firstTableData.forEach(entry1 => {
                            // console.log(entry1,"entry1")
                            // console.log(entry1.dashavalueForm.find((i) => i.end),"end")
                            if (!matchedNakshatras.has(entry1.nakshatra) && !matchedPlanets.has(entry1.planet)) {
                                fourthTableContent += `
                                <tr>
                                    <td class="td-span"><span>${entry1.nakshatra}(${entry1.pada})</span></td>
                                    <td class="td-span"><span>${entry1.rashi}</span></td>
                                    <td class="td-span"><span>${entry1.planet || "-"} ${entry1?.percentageText || " "} ${entry1?.retroPlanet || " "} ${entry1?.combustPlanet || " "} </span></td>
                                    <td class="td-span">
                                        <div class="color-bx ${entry1?.status || "-"}" data-tooltip="${entry1?.positionValue?.status ? entry1?.positionValue.status : '-'}"></div>
                                    </td>
                                    <td class="td-span">
                                        <span data-tooltip="tooltips">
                                            ${entry1.dashaForm && entry1.dashaForm !== "-" ?
                                        `${entry1.dashaForm} <i class="color-bx color-pos-bx4 fa-regular fa-eye mx-2" class="fa-regular fa-eye mx-2" data-tooltip="${entry1.dashaStart} - ${entry1.dashaEnd}"></i>`
                                        : "-"} </span>
                                    </td>
                                </tr>`;
                            }
                        });
                        // Find Nakshatras in Table 1 that are not in Table 2 and exclude matched planets
                        firstTableData.forEach(entry1 => {

                            // console.log(entry1, "entry1")

                            // console.log(GocharData,"gocharData")
                            let matchGocharPlanet = GocharData.find((i) => i.planet_name === entry1.planet && i.nakshatra === entry1.nakshatra && i.pada === entry1.pada)
                            // console.log(matchGocharPlanet, "matchGocharPlanet")

                            if (matchGocharPlanet) {
                                fifthTableContent += `
                                <tr>
                                    <td class="td-span"><span>${entry1.nakshatra}(${entry1.pada})</span></td>
                                    <td class="td-span"><span>${entry1.rashi}</span></td>
                                    <td class="td-span"><span>${entry1.planet || "-"} ${entry1?.percentageText || " "} ${entry1?.retroPlanet || " "} ${entry1?.combustPlanet || " "} </span></td>
                                    <td class="td-span">
                                        <div class="color-bx ${entry1?.status || "-"}" data-tooltip="${entry1?.positionValue?.status ? entry1?.positionValue.status : '-'}"></div>
                                    </td>
                                    <td class="td-span">
                                        <span>${entry1?.dashaForm || "-"}</span>
                                    </td>
                                    <td class="td-span">
                                       <span>
                                         ${matchGocharPlanet?.nakshatra
                                        ? `${matchGocharPlanet.nakshatra} (${matchGocharPlanet.pada || ""}) <i class="color-bx color-pos-bx4 fa-regular fa-eye mx-2" class="fa-regular fa-eye mx-2" data-tooltip="${matchGocharPlanet.date_of_entry} - ${matchGocharPlanet.date_of_exit}"></i>`
                                        : "-"}</span>
                                    </td>
                                </tr>`;
                            }
                        });

                        // Append the matched and unmatched data to respective tables
                        document.getElementById("thirdTable").innerHTML = thirdTableContent;
                        document.getElementById("fourthTable").innerHTML = fourthTableContent;
                        document.getElementById("fifthTable").innerHTML = fifthTableContent;
                    }

                    // Event listener for divisional chart selection
                    document.getElementById("rashiNakSelect").addEventListener("change", (event) => {
                        selectedRasNak = event.target.value;

                        // Disable divisional chart selection if Nakshatra is selected
                        const divisionalSelect = document.getElementById("divisionalSelect");
                        if (selectedRasNak === "Nakshatra") {
                            divisionalSelect.disabled = true;
                        } else {
                            divisionalSelect.disabled = false;
                        }

                        updateTable(comparisonData, storedPadas, position, nakshatraPosition);
                    });

                    // Event listener for divisional chart selection
                    document.getElementById("divisionalSelect").addEventListener("change", (event) => {
                        selectedDivisional = event.target.value;
                        updateTable(comparisonData, storedPadas, position, nakshatraPosition);
                    });

                    currentIndex = (currentIndex + 9) % nakshatraPadas.length;
                }
            };

            // Event listener for house selection
            document.getElementById("houseDropdown").addEventListener("change", (event) => {
                const selectedHouse = event.target.value;
                populateHouseTable(selectedHouse);
            });

            const chartContainer1 = document.getElementById("horoscope-chart1");
            chartContainer1.innerHTML = chart1Url;
            const chartContainer2 = document.getElementById("horoscope-chart2");
            chartContainer2.innerHTML = chart2Url;


            if (horoscopeData && horoscopeData.response) {
                const planetDatas = horoscopeData.response;
                // Function to check if a value is defined
                const isDefined = (value) => value !== undefined && value !== null && value !== "";

                // Map Planet Data
                const mapPlanetData = (data) => {
                    if (Array.isArray(data)) {
                        // If data is an array, map directly
                        return data.map((planet) => ({
                            name: planet.full_name,
                            zodiac: planet.zodiac,
                            house: planet.house,
                            nakshatra: planet.nakshatra,
                            nakshatra_lord: planet.nakshatra_lord,
                            zodiac_lord: planet.zodiac_lord,
                            latitude: planet.local_degree,
                            rishi: planet.nakshatra_lord,
                            nakshatra_pada: planet.nakshatra_pada,
                            relation: planet.zodiac_lord,
                            retro: planet.retro,
                            is_combust: planet.is_combust,
                        }));
                    } else if (typeof data === "object" && data !== null) {
                        // If data is an object, map its values
                        return Object.values(data).map((planet) => ({
                            name: planet.full_name,
                            zodiac: planet.zodiac,
                            house: planet.house,
                            nakshatra: planet.nakshatra,
                            nakshatra_lord: planet.nakshatra_lord,
                            zodiac_lord: planet.zodiac_lord,
                            latitude: planet.local_degree,
                            rishi: planet.nakshatra_lord,
                            nakshatra_pada: planet.nakshatra_pada,
                            relation: planet.zodiac_lord,
                            retro: planet.retro,
                            is_combust: planet.is_combust,
                        }));
                    } else {
                        console.error("Unexpected data format for planets:", data);
                        return [];
                    }
                };

                // Map Dasa Details
                const mapDasaDetails = (data) => {
                    return {
                        birth_dasa: planetDatas.birth_dasa,
                        current_dasa: planetDatas.current_dasa,
                        lucky_gem: planetDatas.lucky_gem,
                        lucky_num: planetDatas.lucky_num,
                        lucky_colors: planetDatas.lucky_colors,
                        lucky_name_start: planetDatas.lucky_name_start,
                        lucky_letters: planetDatas.lucky_letters,
                        rasi: planetDatas.rasi,
                    };
                };

                // Map Dasa Details
                const mapPanchangDetails = (data) => {
                    return {
                        ayanamsa: planetDatas.panchang.ayanamsa,
                        ayanamsa_name: planetDatas.panchang.ayanamsa_name,
                        karana: planetDatas.panchang.karana,
                        yoga: planetDatas.panchang.yoga,
                        day_of_birth: planetDatas.panchang.day_of_birth,
                        day_lord: planetDatas.panchang.day_lord,
                        hora_lord: planetDatas.panchang.hora_lord,
                        sunrise_at_birth: planetDatas.panchang.sunrise_at_birth,
                        sunset_at_birth: planetDatas.panchang.sunset_at_birth,
                        tithi: planetDatas.panchang.tithi,
                    };
                };

                // Populate Table
                const populateTable = async () => {
                    const planetDataElement = document.getElementById("planet-data");
                    const dasaDataElement = document.getElementById("dasa-data");
                    const panchangDataElement = document.getElementById("panchang-data");

                    if (!horoscopeData || !horoscopeData.response) {
                        console.error("Horoscope data is invalid or missing.");
                        return;
                    }

                    // Map Data
                    const planets = mapPlanetData(horoscopeData.response).slice(0, 10);
                    const dasaDetails = mapDasaDetails(horoscopeData);
                    const panchangDetails = mapPanchangDetails(horoscopeData);

                    // Add Planets Data to Table
                    await planets.forEach((planet) => {
                        // Create the table row
                        const row = document.createElement("tr");

                        // Check if at least one field has valid data
                        const hasValidData = [
                            planet.name,
                            planet.zodiac,
                            planet.house,
                            planet.nakshatra,
                            planet.nakshatra_lord,
                            planet.zodiac_lord,
                            planet.latitude,
                            planet.rishi,
                            planet.nakshatra_pada,
                            planet.relation,
                            planet.is_combust,
                            planet.retro
                        ].some((value) => isDefined(value));

                        // If the row has valid data, populate the row
                        if (hasValidData) {
                            row.innerHTML = `
            <td>${isDefined(planet.name) ? planet.name : "-"}</td>
            <td>${planet.retro ? "R" : " "}</td>
            <td>${planet.is_combust ? "C" : " "}</td>
            <td>${isDefined(planet.zodiac) ? planet.zodiac : "-"}</td>
            <td>${isDefined(planet.house) ? planet.house : "-"}</td>
            <td>${isDefined(planet.nakshatra_lord) ? planet.nakshatra_lord : "-"}</td>
            <td>${isDefined(planet.nakshatra) ? planet.nakshatra : "-"}</td>
            <td>${isDefined(planet.nakshatra_pada) ? planet.nakshatra_pada : "-"}</td>
            <td>${isDefined(planet.zodiac_lord) ? planet.zodiac_lord : "-"}</td>
            <td>${isDefined(planet.latitude) ? planet.latitude : "-"}</td>
        `;

                            planetDataElement.appendChild(row);
                        }
                    });

                    // Utility function to check if a value is defined and not blank
                    function isDefined(value) {
                        return value !== undefined && value !== null && value !== "";
                    }

                    // Add Dasa Details to Table
                    dasaDataElement.innerHTML = `
<tr>
          <td colspan="2"><strong>Birth Dasa:</strong></td>
          <td colspan="8">${dasaDetails.birth_dasa || ""}</td>
        </tr>
        <tr>
          <td colspan="2"><strong>Current Dasa:</strong></td>
          <td colspan="8">${dasaDetails.current_dasa || ""}</td>
        </tr>
        <tr>
          <td colspan="2"><strong>Lucky Gem:</strong></td>
          <td colspan="8">${dasaDetails.lucky_gem || ""}</td>
        </tr>
        <tr>
          <td colspan="2"><strong>Lucky Number:</strong></td>
          <td colspan="8">${dasaDetails.lucky_num || ""}</td>
        </tr>
        <tr>
          <td colspan="2"><strong>Lucky Colors:</strong></td>
          <td colspan="8">${dasaDetails.lucky_colors || ""}</td>
        </tr>
        <tr>
          <td colspan="2"><strong>Lucky Letters:</strong></td>
          <td colspan="8">${dasaDetails.lucky_letters || ""}</td>
        </tr>
        <tr>
          <td colspan="2"><strong>Lucky Name Start:</strong></td>
          <td colspan="8">${dasaDetails.lucky_name_start || ""}</td>
        </tr>
        <tr>
          <td colspan="2"><strong>Rasi:</strong></td>
          <td colspan="8">${dasaDetails.rasi || ""}</td>
        </tr>
  `;
                    // Add Dasa Details to Table
                    panchangDataElement.innerHTML = `
<tr>
          <td colspan="2"><strong>Ayanamsa:</strong></td>
          <td colspan="8">${panchangDetails.ayanamsa || ""}</td>
        </tr>
        <tr>
          <td colspan="2"><strong>Ayanamsa_name:</strong></td>
          <td colspan="8">${panchangDetails.ayanamsa_name || ""}</td>
        </tr>
        <tr>
          <td colspan="2"><strong>Karana:</strong></td>
          <td colspan="8">${panchangDetails.karana || ""}</td>
        </tr>
        <tr>
          <td colspan="2"><strong>Yoga:</strong></td>
          <td colspan="8">${panchangDetails.yoga || ""}</td>
        </tr>
        <tr>
          <td colspan="2"><strong>Day of birth:</strong></td>
          <td colspan="8">${panchangDetails.day_of_birth || ""}</td>
        </tr>
        <tr>
          <td colspan="2"><strong>Day lord:</strong></td>
          <td colspan="8">${panchangDetails.day_lord || ""}</td>
        </tr>
        <tr>
          <td colspan="2"><strong>Hora lord:</strong></td>
          <td colspan="8">${panchangDetails.hora_lord || ""}</td>
        </tr>
        <tr>
          <td colspan="2"><strong>Sunrise at birth:</strong></td>
          <td colspan="8">${panchangDetails.sunrise_at_birth || ""}</td>
        </tr>
        <tr>
          <td colspan="2"><strong>Sunset at birth:</strong></td>
          <td colspan="8">${panchangDetails.sunset_at_birth || ""}</td>
        </tr>
        <tr>
          <td colspan="2"><strong>Tithi:</strong></td>
          <td colspan="8">${panchangDetails.tithi || ""}</td>
        </tr>
  `;
                };

                populateHouseTable("1");
                populateTable()

            } else {
                console.error("Horoscope data not found or invalid in localStorage.");
            }
        }
        window.onload = async function () {
            await fetchAllData()
        };
    </script>

    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <!-- Swiper Js file -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <!-- script file -->
    <script src="./js/index.js"></script>
</body>

</html>